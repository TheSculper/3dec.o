<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Costos - Impresión 3D</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="logo.jpg" alt="Logo de 3deco">
        </div>
        <h1>Calculadora de Costos de Impresión 3D</h1>
        <button id="menu-toggle" aria-label="Abrir menú" aria-expanded="false">
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        </button>
        <nav>
            <ul id="main-menu">
                <li><a href="index.html#inicio">Inicio</a></li>
                <li><a href="index.html#servicios">Servicios</a></li>
                <li><a href="index.html#galeria">Galería</a></li>
                <li><a href="index.html#sobre-nosotros">Sobre Nosotros</a></li>
                <li><a href="index.html#tienda-fisica">Tienda Física</a></li>
                <li><a href="index.html#tienda-stl">Tienda STL</a></li>
                <li><a href="index.html#contacto">Contacto</a></li>
                <li><a href="calculo.html">Calculadora</a></li>
            </ul>
        </nav>
    </header>

    <section id="calculadora" class="container">
        <h2>Calcula el Costo de tu Pieza</h2>
        <form id="calculoForm">
            <label for="stlFileInput">¿Tienes el archivo 3D (STL, OBJ, 3MF)?</label>
            <input type="file" id="stlFileInput" accept=".stl,.obj,.3mf">
            <small>Sube tu archivo para una cotización personalizada o rellena manualmente.</small>
            <button type="button" id="enviarStlWhatsAppBtn" class="boton-whatsapp" style="display: none; margin-bottom: 20px;">Enviar Archivo 3D para Cotización</button>
            <hr> <p style="font-weight: bold; margin-bottom: 15px;">O rellena los datos manualmente:</p>

            <label for="materialSelect">Material:</label>
            <select id="materialSelect" name="material" required>
                <option value="">Selecciona un material</option>
                <optgroup label="PLA">
                    <option value="PLA_17">PLA (17 €/kg)</option>
                    <option value="PLA_20">PLA Colores Especiales (20 €/kg)</option>
                </optgroup>
                <optgroup label="PETG">
                    <option value="PETG_23">PETG (23 €/kg)</option>
                </optgroup>
                <optgroup label="ABS">
                    <option value="ABS_25">ABS (25 €/kg)</option>
                </optgroup>
                <optgroup label="TPU">
                    <option value="TPU_30">TPU (30 €/kg)</option>
                </optgroup>
            </select>

            <label for="colorSelect">Color:</label>
            <select id="colorSelect" name="color">
                <option value="">Selecciona un color</option>
            </select>

            <label for="pesoInput">Peso de la pieza (gramos):</label>
            <input type="number" id="pesoInput" name="peso" step="0.01" min="0" placeholder="Ej: 50" required>

            <label for="tiempoInput">Tiempo de impresión (horas):</label>
            <input type="number" id="tiempoInput" name="tiempo" step="0.1" min="0" placeholder="Ej: 3.5" required>

            <label for="postProcesadoInput">Tiempo de Post-Procesado (horas):</label>
            <input type="number" id="postProcesadoInput" name="postProcesado" step="0.1" min="0" placeholder="Ej: 1" value="0">

            <label for="largoInput">Largo de la pieza (cm):</label>
            <input type="number" id="largoInput" name="largo" step="0.1" min="0" placeholder="Ej: 10" value="0" required>

            <label for="anchoInput">Ancho de la pieza (cm):</label>
            <input type="number" id="anchoInput" name="ancho" step="0.1" min="0" placeholder="Ej: 8" value="0" required>

            <label for="altoInput">Alto de la pieza (cm):</label>
            <input type="number" id="altoInput" name="alto" step="0.1" min="0" placeholder="Ej: 5" value="0" required>

            <div id="errorMessages" class="error-messages"></div>

            <button type="submit" style="display: none;">Calcular</button>
        </form>

        <div class="resultados">
            <h3 id="toggleDesglose" style="cursor: pointer;">
                Desglose de Costos <span class="arrow">&#9660;</span>
            </h3>
            <div id="desgloseContenido" class="hidden">
                <p>Costo Material Base: <span id="costoMaterialBase">0.00</span> €</p>
                <p>Costo Material de Soporte: <span id="costoMaterialSoporte">0.00</span> €</p>
                <p>Costo de Máquina: <span id="costoMaquina">0.00</span> €</p>
                <p>Costo de Post-Procesado: <span id="costoPostProcesado">0.00</span> €</p>
                <p>Costo de Empaque: <span id="costoEmpaque">0.00</span> €</p>
                <p class="subtotal">Subtotal Inicial: <span id="subtotalInicial">0.00</span> €</p>
                <p>Ajuste por posibles fallos (5%): <span id="ajusteFallo">0.00</span> €</p>
                <p>Margen de Ganancia (35%): <span id="margenGanancia">0.00</span> €</p>
            </div>
            <p class="total">Costo Total Estimado: <span id="costoTotal">0.00</span> €</p>
        </div>

        <button id="enviarWhatsAppBtn" class="boton-whatsapp" style="display: none;">Enviar Cotización a WhatsApp</button>
    </section>

    <footer>
        <p>&copy; 2025 3deco. Todos los derechos reservados.</p>
    </footer>
</body>
</html>
